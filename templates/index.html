{% extends "base.html" %}

{% block title %}Inicio{% endblock %}
{% block dc_title %}Inicio{% endblock %}
{% block dc_description %}Página de inicio de Metadatos App, mostrando los archivos disponibles.{% endblock %}

{% block content %}
    <h2 class="mb-4">Archivos Disponibles</h2>
    {% if files %}
        <div class="row"> {# Usamos la fila de Bootstrap para el grid #}
            {% for file in files %}
                <div class="col-md-6 col-lg-4 mb-4"> {# Columnas responsivas #}
                    <div class="card h-100 shadow-sm"> {# Tarjetas de Bootstrap #}
                        <div class="card-body">
                            <h5 class="card-title d-flex align-items-center">
                                <i class="bi {{ get_file_icon(file.filename) }} me-2 fs-4"></i> {# Aquí usamos la función y el ícono #}
                                {{ file.title }}
                            </h5>
                            <p class="card-text text-muted">{{ file.description }}</p>
                            <a href="{{ url_for('static', filename='../uploads/' + file.filename) }}" target="_blank" class="btn btn-primary btn-sm">
                                <i class="bi bi-download me-1"></i> Ver/Descargar
                            </a>
                            <small class="text-muted d-block mt-2">Subido el: {{ file.upload_date.strftime('%Y-%m-%d %H:%M') }}</small>
                            <div style="display:none;">
                                <meta name="DC.identifier" content="{{ file.id }}">
                                <meta name="DC.title" content="{{ file.title }}">
                                <meta name="DC.description" content="{{ file.description }}">
                                <meta name="DC.date" content="{{ file.upload_date.strftime('%Y-%m-%d') }}">
                                <meta name="DC.type" content="Archivo Digital">
                                <meta name="DC.format" content="{{ file.filename.split('.')[-1] }}">
                                <meta name="DC.source" content="{{ url_for('static', filename='../uploads/' + file.filename, _external=True) }}">
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info" role="alert">
            No hay archivos subidos todavía.
        </div>
    {% endif %}
{% endblock %}
